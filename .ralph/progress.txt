# Ralph Progress Log
Started: 2026-01-15

## Codebase Patterns
- (To be filled as patterns are discovered)

## Key Files
- (List key files relevant to this feature)

---

## 2026-01-15 - ralph-cli-b75
- Removed custom ralph-plan skill - beads now handles AI-managed task tracking
- Files changed:
  - Deleted `.claude/skills/ralph-plan/SKILL.md`
  - `source/components/SetupWizard.tsx` - Removed skill installation step
  - `source/utils/setup-scaffolding.ts` - Removed `installRalphPlanSkill` function and references
  - `source/utils/setup-checker.ts` - Removed skill path from `getRalphPaths` and check items
  - `source/templates/index.ts` - Removed `DEFAULT_RALPH_PLAN_SKILL` constant
  - `source/types/config.ts` - Removed `skillsDir` and `ralphPlanSkill` from `RalphPaths`
  - `source/app.tsx` - Updated "no-prd" view message to reference beads
  - `readme.md` - Updated documentation to reflect beads workflow
  - `.prettierignore` - Added `.beads`, `.claude`, `CLAUDE.md` to ignore formatting
- **Learnings:**
  - The ralph-plan skill was used for PRD-based planning (prd.json) - now replaced by beads
  - Multiple files referenced the skill: types, scaffolding, checker, templates, UI components
  - Pre-existing test infrastructure issues (eslint unicorn plugin, ava config) not related to changes
---

## 2026-01-15 - ralph-cli-w9o
- Fixed output stream visualization issue where tool calls broke TUI layout
- Root cause: Multi-line content in tool use/result strings (e.g., code snippets with newlines) was displayed without normalization
- Files changed:
  - `source/lib/stream-formatter.ts` - Added `normalizeWhitespace()` function and updated `truncate()` to normalize whitespace before display
- **Learnings:**
  - The `truncate()` function is used throughout the stream formatter for both tool inputs and outputs
  - TUI components like OutputPanel expect single-line strings per logical entry; embedded newlines break layout
  - The fix normalizes `\n`, `\r`, `\t` to spaces and collapses multiple consecutive spaces
  - Pre-existing test infrastructure issues prevent running ava tests, but manual testing via node confirms fix works
---

## 2026-01-15 - ralph-cli-3o9
- Created WelcomePanel.tsx and SetupWizardPanel.tsx for unified two-column UI
- Files created:
  - `source/components/WelcomePanel.tsx` - Welcome message for right panel when no ticket selected
  - `source/components/SetupWizardPanel.tsx` - Pure presentation component extracted from SetupWizard
- **Learnings:**
  - SetupWizard.tsx has display logic mixed with state/input handling - SetupWizardPanel extracts just the presentation
  - SetupStep type: 'checking' | 'prompt' | 'scaffolding' | 'complete' | 'error'
  - ScaffoldingStatus contains results for ralphDir, promptFile, progressFile, beads
  - Components use Box with borderStyle="round" and borderColor="gray" for panel styling
  - Type icons: ◎ epic, ★ feature, ⚠ bug, ◆ task (consistent across TicketSelector, MainLayout)
---

## 2026-01-15 - ralph-cli-68m
- Added `SetupPhase` type to state.ts for unified layout setup wizard states
- Deprecated `AppView` type with JSDoc `@deprecated` annotation
- Updated SetupWizardPanel.tsx to use `SetupPhase` instead of local `SetupStep` type
- Renamed prop from `step` to `phase` in SetupWizardPanel for consistency
- Files changed:
  - `source/types/state.ts` - Added SetupPhase type, deprecated AppView
  - `source/components/SetupWizardPanel.tsx` - Import SetupPhase from types, rename step→phase
- **Learnings:**
  - Types are exported through `source/types/index.ts` which re-exports all from state.js
  - SetupWizardPanel uses discriminated union pattern with conditional rendering based on phase
  - Pre-existing test infrastructure issues (eslint unicorn plugin) unrelated to this task
---
